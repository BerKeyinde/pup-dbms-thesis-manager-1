<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="/static/style.css">
    <script type="text/javascript" src='/static/jquery-1.11.3.min.js'></script>
    <link rel="stylesheet" type="text/css" href="/static/chosen.min.css" />
    <script type="text/javascript" src='/static/chosen.jquery.min.js'></script>
    <script type="text/javascript" src='/static/chosen.proto.min.js'></script>
    <link rel="stylesheet" type="text/css" href="/static/flatui/css/vendor/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/static/flatui/css/flat-ui.min.css">
    <script type="text/javascript">
        $(document).ready(function(){
            $("#university_list").change(function()
            {
                if ($(this).val() == '/university/create') {document.location.href = $(this).val();};
            });
        });
    </script>
</head>
<body>
<div class='container' style='padding-bottom:150px;'>
    <nav class="navbar navbar-default navbar-inverse navbar-embossed navbar-lg" role="navigation">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-01">
          <span class="sr-only">Toggle navigation</span>
        </button>
      </div>
      <div class="collapse navbar-collapse" id="navbar-collapse-01">
        <ul class="nav navbar-nav">
          <li class='active'><a href="/">Home</a></li>
        {%for key, value in links.items(): %}
          <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">{{key}}<b class="caret"></b></a>
              <ul class="dropdown-menu">
                {%for k, v in value.items(): %}
                <li><a href="{{v}}" style="float: right;">{{k}}</a></li>
                {%endfor%}
              </ul>
          </li>
        {%endfor%}
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li class='divider-vertical'></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">{{user}}<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="{{logout_url}}" style="float: right;">Logout</a></li>
              </ul>
            </li>
            <li><a href="{{search_url}}">Search Thesis</a></li>
          </ul>
      </div><!-- /.navbar-collapse -->
    </nav><!-- /navbar -->

    <div class='well well-lg'>
        <p style='text-align:center;'>UPDATE STUDENT ENTRY</p>
        <form class="student-update">
          <div class='row' style='padding-bottom:10px;'>
            <div class='col-md-2'></div>
            <div class='col-md-4'>
              <input class="form-control" style='width:100%;' type="text" placeholder="Full Name: {{item.student_full}}" disabled style='width:80%;' />
            </div>
            <div class='col-md-4'>

            </div>
            <div class='col-md-2'></div>
          </div><!--row-->
          <div class='row'>
            <div class='col-md-2'></div>
            <div class='col-md-4 grp'>
              <div class='input-group'>
                <span class='input-group-addon'>First Name</span>
                 <input class="form-control flat" placeholder="FIRST NAME" name="student_fname" value='{{item.student_fname}}'/>
              </div>
            </div>
            <div class='col-md-4 grp'>
              <div class='input-group'>
                <span class='input-group-addon'>Last Name</span>
                <input class="form-control flat" placeholder="LAST NAME" name="student_sname" value='{{item.student_sname}}'/>
              </div>
            </div>
            <div class='col-md-2'></div>
          </div><!--row-->
          <div class='row'>
            <div class='col-md-2'></div>
            <div class='col-md-4 grp'>
              <div class='input-group'>
                <span class='input-group-addon'>Email Address</span>
                 <input class='form-control flat' placeholder='EMAIL ADDRESS' name='student_email' value='{{item.student_email}}' />
              </div>
            </div>
            <div class='col-md-4 grp'>
              <div class='input-group'>
                <span class='input-group-addon'>Phone Number</span>
                <input class="form-control flat" placeholder="PHONE NUMBER" name="student_phone" value='{{item.student_phone}}' />
              </div>
            </div>
            <div class='col-md-2'></div>
          </div><!--row-->
          <div class='row'>
            <div class='col-md-2'></div>
            <div class='col-md-4'>
              <div class='input-group'>
                <span class='input-group-addon'>Student Number</span>
                <input class="field student_phone form-control flat" placeholder="STUDENT NUMBER" name='student_number' value='{{item.student_number}}' />
              </div>
            </div>
            <div class='col-md-4'>
              <select data-toggle="select" style='width:100%;' class="form-control select select-primary select-lg department-list" id='yearGraduated' name='student_graduated'>
                <option selected value='{{item.student_graduated}}'>{{item.student_graduated}}</option>
                <option><hr></option>
              </select>
            </div>
            <div class='col-md-2'></div>
          </div><!--row-->
          <div class='row'>
            <div class='col-md-2'></div>
            <div class='col-md-4 grp'>
              <div class='input-group'>
                <span class='input-group-addon'>Birthdate</span>
                <input class='form-control flat' type="text" id="datepicker" name='student_bday' placeholder='BIRTHDATE' value='{{item.student_bday}}' />
              </div>
            </div>
            <div class='col-md-4 grp'>
              <select data-toggle="select" style='width:100%;' class="form-control select select-primary select-lg department-list" id='department-list' name='student_department'>
                <option value='{{dept}}' selected>{{dept}}</option>
                <option value='/department/create'>ADD DEPARTMENT</option>
              </select>
            </div>
            <div class='col-md-2'></div>
          </div><!--row-->
          <div class='row'>
            <div class='col-md-8 '></div>
            <div class='col-md-1'>
              <input style='float:right;' class='btn btn-warning' type="submit" value='SUBMIT' />
            </form> <!-- faculty-update -->
            </div>
            <div class='col-md-1'>
              <form class='faculty-delete'>
                <input style='float:right;' type='submit' class='btn btn-danger' value='DELETE'>
              </form>
            </div>
            <div class='col-md-2'></div>
          </div> <!--row-->
    </div> <!-- well -->

    

</div>
<footer>
      <div class="container">
        <div class="row">
          <div class="col-xs-7">
            <h3 class="footer-title">About This Web App</h3>
            <p>This web application is the final project for Database Management System, under Engr. Roman Angelo Tria, Department of Computer Engineering, Polytechnic University of the Philippines.
            </p>

            <p class="pvl">
                <iframe src="http://ghbtns.com/github-btn.html?user=BerKeyinde&type=follow&count=true" height="20" width="195" frameborder="0" scrolling="0" style="width:195px; height: 20px;" allowTransparency="true"></iframe>
              <!--<iframe src="http://ghbtns.com/github-btn.html?user=designmodo&repo=Flat-UI&type=fork&count=true" height="20" width="107" frameborder="0" scrolling="0" style="width:105px; height: 20px;" allowTransparency="true"></iframe>-->
              
            </p>
          </div> <!-- /col-xs-7 -->

          <div class="col-xs-5">
            <div class="footer-banner">
              <h3 class="footer-title">Features</h3>
              <ul>
                <li>Thesis CrUD and Management for Online Compendium</li>
                <li>Faculty CrUD</li>
                <li>Students/Proponents CrUD</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </footer>

<script type="text/javascript">
    $('a[href="#"]').click(function(){
      $('.dropdown-toggle').dropdown()
    }); 
</script>
<script type="text/javascript" src='/static/assets-department.js'></script>
<script type="text/javascript" src='/static/flatui/js/flat-ui.min.js'></script>
<script type="text/javascript" src='/static/flatui/js/prettify.js'></script>
<script type="text/javascript" src='/static/flatui/js/radiocheck.js'></script>
<script type="text/javascript" src='/static/flatui/js/application.js'></script>
<script type="text/javascript" src='/static/flatui/js/vendor/bootstrap.min.js'></script>
<script type="text/javascript" src='/static/Pikaday/pikaday.js'></script>
<script>
    var picker = new Pikaday({ field: document.getElementById('datepicker'),
    yearRange: [1950, 2015] });
</script>
<script type="text/javascript">
    var min = new Date().getFullYear();
        max = 2000;
        select = document.getElementById('yearGraduated');

    for (var i = min; i > max; i--){
        var opt = document.createElement('option');
        opt.value = i;
        opt.innerHTML = i;
        select.appendChild(opt);
    }

    select.value = new Date().getFullYear();
    $('.chosen-select').chosen();
</script>
<script type="text/javascript">
  function studentEdit(event)
  {
    var data = $(event.target).serializeArray();

    var student = {};
    for (var i = 0; i < data.length; i++) {
      student[data[i].name] = data[i].value;
  }

  var user_api = location.protocol + "//" + location.hostname + (location.port && ":" + location.port) + '/student/' + '{{item.key.id()}}';
  $.post(user_api, student, function(response) {
    console.log('data', response)
    if (response.status = 'OK') {
       alert('Registration success');
       window.location.replace("/");
     } else {
       alert('Something went wrong');
     }
  });
  return false;
  }

  function studentDelete(event)
  {
    var data = $(event.target).serializeArray();

    var student = {};
    var j = 0;
    for (var i = 0; i < data.length; i++) {
      student[data[i].name] = data[i].value;
    }

    var r = confirm("Are you sure you want to delete this entry?");

    if (r == true) {
      var student_api = location.protocol + "//" + location.hostname + (location.port && ":" + location.port) + '/student/{{item.key.id()}}/delete';
      $.post(student_api, student, function(response) {
      console.log(response)
      if (response.status = 'OK') {
         alert('Delete success');
         window.location.replace("/");
       } else {
         alert('Something went wrong');
       }
    });
    }
    return false;
  }

  $('.student-update').submit(studentEdit);
  $('.student-delete').submit(studentDelete);
</script>
</body>
</html>