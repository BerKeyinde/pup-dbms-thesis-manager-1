<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="/static/style.css">
    <script type="text/javascript" src='/static/jquery-1.11.3.min.js'></script>
    <link rel="stylesheet" type="text/css" href="/static/chosen.min.css" />
    <script type="text/javascript" src='/static/chosen.jquery.min.js'></script>
    <link rel="stylesheet" type="text/css" href="/static/flatui/css/vendor/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/static/flatui/css/flat-ui.min.css">
</head>
<body>
<div class='container'>
    <nav class="navbar navbar-default navbar-inverse navbar-embossed navbar-lg" role="navigation">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-01">
          <span class="sr-only">Toggle navigation</span>
        </button>
      </div>
      <div class="collapse navbar-collapse" id="navbar-collapse-01">
        <ul class="nav navbar-nav">
          <li class='active'><a href="/">Home</a></li>
        {%for key, value in links.items(): %}
          <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">{{key}}<b class="caret"></b></a>
              <ul class="dropdown-menu">
                {%for k, v in value.items(): %}
                <li><a href="{{v}}" style="float: right;">{{k}}</a></li>
                {%endfor%}
              </ul>
          </li>
        {%endfor%}
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li class='divider-vertical'></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">{{user}}<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="{{logout_url}}" style="float: right;">Logout</a></li>
              </ul>
            </li>
            <li><a href="{{search_url}}">Search Thesis</a></li>
          </ul>
      </div><!-- /.navbar-collapse -->
    </nav><!-- /navbar -->

    <div class='well well-lg'>
      <p>UPDATE THESIS ENTRY</p>
      <form class='thesis-update'>
      <div class='row'>
        <div class='col-md-2'></div>
        <div class='col-md-4 '>
          <div style='padding-bottom:10px;'>
            <select data-toggle="select" style='width:100%' class="form-control select select-primary select-lg department-list" id='department-list' name='thesis_department'>
              <option selected value='{{department}}'>{{department}}</option>
               <option>SELECT DEPARTMENT</option>
              <option value'/department/create'>Add Department</option>
            </select>
          </div>
        </div>
        <div class='col-md-4'>
          <div style='padding-bottom:10px;'>
            <select style='width:100%'data-toggle="select" class="form-control select select-primary select-lg" name='thesis_year'>
               <option selected value='{{thesis.thesis_year}}'>{{thesis.thesis_year}}</option>
              <option>SELECT YEAR CREATED</option>
              <option value="2015">2015</option>
              <option value="2014">2014</option>
              <option value="2013">2013</option>
              <option value="2012">2012</option>
              <option value="2011">2011</option>
            </select>
          </div>
        </div> 
      </div>
      <div class='row'>
        <div class='col-md-2'></div>
        <div class='col-md-4 grp'>
          <div class='input-group'>
            <span class='input-group-addon'>Title</span>
            <input class="form-control flat" placeholder="THESIS TITLE" name="thesis_title" value='{{thesis.thesis_title}}'/>
            </div>
        </div>
        <div class='col-md-4'>
          <div style='padding-bottom:10px;'>
            <select style='width:100%'data-toggle="select" class="form-control select select-primary select-lg" name='thesis_section'>
              <option selected value='{{thesis.thesis_section}}'>{{thesis.thesis_section}}</option>
              <option>SELECT SECTION</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>
      </div>
      <div class='row'>
        <div class='col-md-2'></div>
        <div class='col-md-1'>
          <span>Proponents</span>
        </div>
        <div class='col-md-3' style='padding-left:10px;'>
          <span class='pull-right'>
          <select style='width:100%' data-toggle="select" multiple class="form-control multiselect multiselect-default mrs mbm thesis_proponents" name='thesis_proponents' id='thesis_proponents'>
            {% for p in proponents: %}
            <option selected value='{{p}}'>{{p}}</option>
            {%endfor%}
          </select>
          </span>
        </div>
        <div class='col-md-4'>
          <select style='width:100%'data-toggle="select" class="form-control select select-primary select-lg" id='faculty-list' name='thesis_adviser'>
              <option selected value='{{adviser}}'>{{adviser}}</option>
             <option>SELECT ADVISER</option>
             <option value='/faculty/create'>Add Faculty</option>
          </select>
        </div>
        <div class='col-md-2'></div>
      </div>
      <div class='row'>
        <div class='col-md-2'></div>
        <div class='col-md-8'><textarea class='form-control' name="thesis_abstract" placeholder="THESIS ABSTRACT">{{thesis.thesis_abstract}}</textarea></div>
      </div>
      <br>
      <div class='row'>
        <div class='col-md-8'></div>
          <div class='col-md-1'>
            <input style='float:right;' class='btn btn-warning' type="submit" value='SUBMIT' />
          </form> <!-- thesis-entry -->
          </div>
          <div class='col-md-1'>
            <form class='thesis-delete'>
              <input type='submit' value='DELETE' class='btn btn-danger'/>
            </form>
          </div>
        <div class='col-md-2'></div>
      </div> <!--row-->
    </div>
</div>
<footer>
      <div class="container">
        <div class="row">
          <div class="col-xs-7">
            <h3 class="footer-title">About This Web App</h3>
            <p>This web application is the final project for Database Management System, under Engr. Roman Angelo Tria, Department of Computer Engineering, Polytechnic University of the Philippines.
            </p>

            <p class="pvl">
                <iframe src="http://ghbtns.com/github-btn.html?user=BerKeyinde&type=follow&count=true" height="20" width="195" frameborder="0" scrolling="0" style="width:195px; height: 20px;" allowTransparency="true"></iframe>
              <!--<iframe src="http://ghbtns.com/github-btn.html?user=designmodo&repo=Flat-UI&type=fork&count=true" height="20" width="107" frameborder="0" scrolling="0" style="width:105px; height: 20px;" allowTransparency="true"></iframe>-->
              
            </p>
          </div> <!-- /col-xs-7 -->

          <div class="col-xs-5">
            <div class="footer-banner">
              <h3 class="footer-title">Features</h3>
              <ul>
                <li>Thesis CrUD and Management for Online Compendium</li>
                <li>Faculty CrUD</li>
                <li>Students/Proponents CrUD</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </footer>
<script type="text/javascript">
    $('a[href="#"]').click(function(){
      $('.dropdown-toggle').dropdown()
    }); 
</script>
<script type="text/javascript" src='/static/assets-thesis.js'></script>
<script type="text/javascript" src='/static/flatui/js/flat-ui.min.js'></script>
<script type="text/javascript" src='/static/flatui/js/prettify.js'></script>
<script type="text/javascript" src='/static/flatui/js/radiocheck.js'></script>
<script type="text/javascript" src='/static/flatui/js/application.js'></script>
<script type="text/javascript" src='/static/flatui/js/vendor/bootstrap.min.js'></script>
<script type="text/javascript" src='/static/assets-thesis.js'></script>
<script type="text/javascript">
  function onPost(event){
    var d = $('#thesis_proponents').val();
    var data = $(event.target).serializeArray();

    var thesis = {};
    var j = 0;
    for (var i = 0; i < data.length; i++) {
      if (data[i].name == 'thesis_proponents') {
        thesis['thesis_proponent_' + j] = d[j];
        j++;
      } else {thesis[data[i].name] = data[i].value;}
    }

    var thesis_api = location.protocol + "//" + location.hostname + (location.port && ":" + location.port) + '/thesis/{{thesis.key.id()}}/edit';
    $.post(thesis_api, thesis, function(response) {
      console.log('data', response)
      if (response.status = 'OK') {
         alert('Registration success');
         window.location.replace("/");
       } else {
         alert('Something went wrong');
       }
    });
    return false;
  }

  function thesisDelete(event)
  {
    var data = $(event.target).serializeArray();

    var thesis = {};
    var j = 0;
    for (var i = 0; i < data.length; i++) {
      thesis[data[i].name] = data[i].value;
    }

    var r = confirm("Are you sure you want to delete this entry?");

    if (r == true) {
      var thesis_api = location.protocol + "//" + location.hostname + (location.port && ":" + location.port) + '/thesis/{{thesis.key.id()}}/delete';
      $.post(thesis_api, thesis, function(response) {
      console.log(response)
      if (response.status = 'OK') {
         alert('Delete success');
         window.location.replace("/");
       } else {
         alert('Something went wrong');
       }
    });
    }
    return false;
  }
  $('.thesis-update').submit(onPost);
  $('.thesis-delete').submit(thesisDelete);
</script>
</body>
</html>
